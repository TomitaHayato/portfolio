<div class="p-3 mx-auto bg-green-50 rounded-lg w-11/12 md:w-9/12">

  <div class="flex gap-2 mb-5">
    <%= link_to "<< ルーティン一覧", routines_path,
      class: "btn text-xs bg-green-400 btn-sm min-h-9
              sm:min-w-28 sm:text-sm lg:btn-md
              hover:from-gray-300 hover:to-gray-300 hover:scale-105"
    %>

    <%= link_to "<< マイページ", my_pages_path,
      class: "btn text-xs bg-green-400 btn-sm min-h-9
              sm:min-w-28 sm:text-sm lg:btn-md
              hover:from-gray-300 hover:to-gray-300 hover:scale-105"
    %>
  </div>
  
  <div class="items-center mb-5 sm:flex sm:justify-between sm:flex-wrap-reverse">
    <div class="flex justify-end gap-1 mb-3 sm:order-last sm:ml-auto sm:gap-3 md:gap-5">
      <%= link_to "編集", edit_routine_path(@routine), class: "min-h-10 btn bg-gradient-to-tl from-green-300 to-green-100 text-sm btn-sm sm:btn-md md:text-base hover:from-gray-300 hover:to-gray-300 hover:scale-105", id: "routine-edit-btn-#{@routine.id}" %>
      <%= link_to "削除", routine_path(@routine, from_path: request.path), data: { turbo_method: :delete, turbo_confirm: "#{@routine.title}を削除してもよろしいですか？" }, class: "min-h-10 btn bg-gradient-to-tl from-red-600 to-red-200 text-sm btn-sm sm:btn-md md:text-base hover:from-gray-300 hover:to-gray-300 hover:scale-105", id: "routine-delete-btn-#{@routine.id}" %>
    </div>

    <h1 class="break-words bg-inherit rounded-lg p-3 font-semibold my-2 text-2xl md:text-3xl lg:text-4xl"><%= @routine.title %></h1>
  </div>

  <div class="mb-5 mx-auto bg-white shadow-md rounded-lg p-3 sm:p-5 sm:mx-5">
    <p><%= @routine.description %></p>
  </div>

  <div class="mb-5 mx-3 text-sm flex flex-col gap-2 sm:flex-row sm:justify-between sm:justify-start sm:mx-5 sm:gap-5 lg:text-base lg:gap-10 lg:mx-16">
    <div>
      <p class="font-semibold">開始時間</p>
      <%= @routine.start_time.strftime("%H:%M") if @routine.start_time %>
      （<%= I18n.t("activerecord.attributes.routine/notification.#{@routine.notification}") %>）
    </div>
    
    <div id="total-estimated-time-for-routine-<%= @routine.id %>">
      <%= render "routines/routine_total_estimated_time", routine: @routine %>
    </div>

    <div>
      <p class="font-semibold">達成回数</p>
      <%= @routine.completed_count %>
    </div>
  </div>
  
  <div class="text-center p-5 bg-inherit">

    <!-- タスク オートコンプリート -->
    <%= select_tag 'auto_complete',
      options_for_select(@all_task_names),
      class: "hidden",
      id: "all-task-names" 
    %>
    
    <!-- タスク一覧を表示 -->
    <ul class="list-group" id="task-index">
      <%= render partial: "routines/task", collection: @tasks, locals: { routine: @routine, tags: @tags } %>
    </ul>
    <!-- タスク追加ボタンを表示 -->
    <div id="add_task_btn">
      <%= render partial: 'routines/add_task_btn', locals: { routine: @routine, task: @task, tags: @tags } %>
    </div>
  </div>
</div>
